notifications:
  webhooks: https://coveralls.io/webhook

matrix:
  include:
  - language: ruby
    rvm: 2.6.3
    dist: trusty
    services:
      - postgresql
    env:
      - COVERALLS_PARALLEL=true
    addons:
      postgresql: "9.4"
    before_install:
      - psql -c 'CREATE DATABASE pitaka_test;' -U postgres
    install:
      - bundle install
    before_script:
      - cd backend/pitaka
    script:
      - bundle exec rails db:migrate RAILS_ENV=test
      - bundle exec rspec
      - bundle exec rubocop
